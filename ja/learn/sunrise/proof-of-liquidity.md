# Proof of Liquidity

Proof of Liquidity（PoL）は、ユーザーの流動性提供履歴をネットワークの投票力の基盤として利用する、新しいシビル耐性メカニズムです。このアプローチは、従来のモデルよりも持続可能な方法で、バリデーター、流動性提供者、およびアプリケーション間の経済的インセンティブを調整します。

## コアコンセプト

### 理論的基礎

Proof of Liquidityは、確立されたDeFiメカニズムを基盤としながら、主要な問題を解決します：

1.  **ve-Tokenomicsを超えて**：Curveのようなve（vote-escrowed）モデルはガバナンス参加を可能にしますが、PoLは流動性提供をネットワークセキュリティと直接統合します。
2.  **経済活動の分離**：PoLは、コンセンサスセキュリティ、ガバナンス、および取引手数料にそれぞれ異なるトークンを使用します。
3.  **持続可能なインセンティブ**：トークン価値を希薄化させる従来のDEXインフレーションモデルとは異なり、PoLは循環的な経済システムを構築します。

## 実装モデル

### Berachainの実装

Berachainは、3つのトークン設計でPoLモデルを開拓しました：

- **$BERA**：取引手数料とステーキング（セキュリティレイヤー）に使用される譲渡可能なトークン。
- **$BGT**：流動性を提供することで獲得できる譲渡不可能なガバナンストークン。
- **$HONEY**：エコシステム内での価値移転のためのステーブルコイン。

**主要な技術コンポーネント：**

- バリデーターは$BERAをステーキングしてコンセンサスセットに参加します。
- ブロック報酬は、バリデーターの「ブースト」率に基づいて$BGTで支払われます。
- 「ブースト」は、トークン保有者から委任された$BGTから計算されます。
- バリデーターは、流動性提供者に$BGTを分配するリワードボールトに排出量を向けます。

**価値の流れ：**

1.  バリデーターはセキュリティボンドとして$BERAをステーキングします。
2.  バリデーターはブロック生成に対して$BGT報酬を受け取ります。
3.  バリデーターはプロトコルリワードボールトに$BGT報酬を向けます。
4.  流動性提供者は、$BGTを獲得するためにリワードボールトにレシートトークンをステーキングします。
5.  $BGT保有者は、報酬を増やすためにバリデーターに委任します。
6.  プロトコルは、排出量（emissions）を引き付けるためにバリデーターにインセンティブを提供します。

### Sunriseの実装

Sunriseは、独自のアーキテクチャでPoLの概念を基に構築されています：

- **$vRISE**：ステーキングとガバナンスのための譲渡不可能なトークン。
- **$RISE**：ガスと手数料として使用される譲渡可能なトークン。

**技術的実装：**

- `x/liquiditypool`モジュールの流動性提供者は$vRISEを獲得します。
- $vRISE保有者は`x/staking`モジュールでステーキングできます。
- ステーキング参加者は`x/liquidityincentive`モジュールを介してゲージ投票に参加します。
- ゲージ投票者は、どのプールが$vRISEインセンティブを受け取るかを決定します。
- 投票者はプールの利益から報酬を得ることで、インセンティブが一致します。

## 技術アーキテクチャ

### Sunriseモジュール

Sunriseの実装は、PoLエコシステムを構築するために相互作用するいくつかの主要なモジュールで構成されています：

| | 機能 |
| --- | --- |
| x/liquiditypool | コアAMM機能 |
| x/liquidityincentive | ゲージ投票とインセンティブ分配 |
| x/swap | トークンスワップ実装 |
| x/staking | vRISEステーキング管理 |

### ゲージ投票システム

ゲージ投票システムは、PoL実装の基礎です：

1.  **エポックベースの投票**：

    - 投票力は、エポック開始時にステーキングされた$vRISEによって決定されます。
    - 各エポックは、事前に定義された数のブロックにわたります（ガバナンスを介して設定可能）。
    - 新しいエポックが作成されるたびに投票はクリアされます。

2.  **報酬分配**：

$$
  \text{pool rewards} = \text{total rewards} \times \text{pool's voting power} / \text{total voting power of all pools}
$$

$$
  \text{user rewards} = \text{pool rewards} \times \text{user voting power} / \text{pool's voting power}
$$

    - 排出量はブロックごとに計算されます。
    - 投票されたゲージの重みと各ユーザーの投票力に基づいて分配されます。
    - 報酬はユーザーのポジションに蓄積され、いつでも請求できます。

### コンセンサス実装

Sunriseは、以下の仕様でCometBFT（Tendermint）をコンセンサスに使用します：

- **最大バリデーターセット**：100バリデーター
- **ブロックタイム**：約10秒
- **バリデーター選択**：ステークの重みに基づく

将来の計画には、スループットを向上させるためのMysticeti統合の調査が含まれます。

## 技術的利点

### 資本効率

ステーキングされたトークンがアイドル状態になる従来のPoSとは異なり、PoLは以下を可能にします：

- 流動性提供によるアクティブな資本活用
- 二重の収益機会（ステーキング+流動性手数料）
- ネットワークセキュリティのための低い機会費用

### 経済的整合性

技術設計は、インセンティブを整合させる循環的な依存関係を生み出します：

- バリデーターは、報酬を最大化するために委任された$RISE/$vRISEを必要とします。
- アプリケーションは、流動性のためにバリデーターの排出量を必要とします。
- ユーザーは、ガバナンストークンを獲得するために流動性を提供する必要があります。
- インフレーション報酬は$RISEで分配されるため、$vRISE（ガバナンストークン）の希薄化にはつながりません。

<!-- Berachain-style summary table with icons and token names -->

| 機能 | トークン | 詳細 |
| --- | --- | --- |
| セキュリティ | ![RISE](../../images/RISE.png) RISE + ![vRISE](../../images/vRISE.png) vRISE | vRISEとRISEの両方をコンセンサスのためにステーキングできます |
| ガバナンス | ![vRISE](../../images/vRISE.png) vRISE | vRISEはオンチェーンガバナンスとゲージ投票に使用されます |
| セキュリティ排出量 | ![RISE](../../images/RISE.png) RISE | RISEはコンセンサス報酬としてステーキング参加者に分配されます |
| LP排出量 | ![vRISE](../../images/vRISE.png) vRISE | vRISEはインセンティブとしてLPに分配されます |
| 手数料 | 任意（[手数料トークン](./fee.md)にスワップ） | RISEは取引手数料として使用されます |

**凡例：**
![RISE](../../images/RISE.png) = RISE
![vRISE](../../images/vRISE.png) = vRISE

> **注：**
> Sunriseでは、各トークンの役割と報酬が明確に定義されています。
> この明確な機能分離は、ガバナンスや流動性報酬が分配される際のネットワークセキュリティの希薄化を防ぐのに役立ちます。

### セキュリティに関する考慮事項

実装には、いくつかのセキュリティ対策が含まれています：

- **スラッシング条件**：バリデーターは不正行為に対してステーキングされた資産を失うリスクがあります。
- **ガバナンスの保護**：加重投票により乗っ取りを防ぎます。
- **インセンティブの互換性**：経済設計により攻撃を抑制します。

## パフォーマンスに関する考慮事項

PoLの実装は、いくつかのパフォーマンス要因のバランスを取る必要があります：

- **エポックの長さ**：長いエポックは計算オーバーヘッドを削減しますが、応答性を低下させます。
- **バリデーターセットのサイズ**：セットが大きいほど分散化が進みますが、コンセンサス速度に影響を与える可能性があります。
- **投票処理**：ガス代を最小限に抑えるため、エポックの境界で投票を一括処理します。
- **レシートトークンの計算**：流動性ポジションと報酬分配の追跡を最適化します。

## 今後の方向性

いくつかの技術的強化が検討されています：

1.  **Mysticetiの統合**：スループットを向上させるためのMysticetiコンセンサスの採用を調査します。
2.  **クロスチェーンゲージ**：接続されたチェーン上の流動性に対する投票を可能にします。
3.  **動的排出スケジュール**：ネットワークメトリクスに基づいて排出量をアルゴリズム的に調整します。
4.  **高度な報酬メカニズム**：ボンディングカーブを使用した、より洗練された報酬分配。

## 参考文献

- [Berachain: Flow of Value](https://blog.berachain.com/blog/flow-of-value-examining-the-differences-between-pos-and-pol-a-case-for-a-new-paradigm-in-sustainable-incentive-alignment-at-the-protocol-layer)
- [ve(3,3) Tokenomics](https://andrecronje.medium.com/ve-3-3-44466eaa088b)
- [Curve Finance ve-Token Model](https://curve.fi/files/CurveDAO.pdf)
- [Mysticeti Consensus](https://sui.io/mysticeti)