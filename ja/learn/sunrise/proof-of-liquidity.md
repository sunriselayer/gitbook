# プルーフ・オブ・リクイディティ

プルーフ・オブ・リクイディティ（PoL）は、ユーザーの流動性提供履歴をネットワークの投票力の基盤として利用する、新しいシビル耐性メカニズムです。このアプローチは、バリデーター、流動性プロバイダー、アプリケーション間の経済的インセンティブを、従来のモデルよりも持続可能な方法で調整します。

## コアコンセプト

### 理論的基礎

プルーフ・オブ・リクイディティは、確立されたDeFiメカニズムを基盤としながら、主要な問題を解決します。

1. **ve-Tokenomicsを超えて**: Curveのようなve（vote-escrowed）モデルはガバナンス参加を可能にしますが、PoLは流動性提供をネットワークセキュリティと直接統合します。
2. **経済活動の分離**: PoLは、コンセンサスセキュリティ、ガバナンス、取引手数料にそれぞれ異なるトークンを使用します。
3. **持続可能なインセンティブ**: トークン価値を希薄化させる従来のDEXインフレモデルとは異なり、PoLは循環的な経済システムを構築します。

## 実装モデル

### Berachainの実装

Berachainは、3つのトークン設計でPoLモデルを開拓しました。

* **$BERA**: 取引手数料とステーキング（セキュリティレイヤー）に使用される譲渡可能なトークン
* **$BGT**: 流動性を提供することで獲得できる譲渡不可能なガバナンストークン
* **$HONEY**: エコシステム内での価値移転のためのステーブルコイン

**主要な技術的コンポーネント:**

* バリデーターは$BERAをステークしてコンセンサスセットに参加します。
* ブロック報酬は、バリデーターの「ブースト」率に基づいて$BGTで支払われます。
* 「ブースト」は、トークン保有者からデリゲートされた$BGTから計算されます。
* バリデーターは、排出量をリワードボールトに向け、リワードボールトは流動性プロバイダーに$BGTを分配します。

**価値の流れ:**

1. バリデーターはセキュリティボンドとして$BERAをステークします。
2. バリデーターはブロック生成の報酬として$BGTを受け取ります。
3. バリデーターは$BGT報酬をプロトコルのリワードボールトに向けます。
4. 流動性プロバイダーは、リワードボールトにレシートトークンをステークして$BGTを獲得します。
5. $BGT保有者はバリデーターにデリゲートして報酬をブーストします。
6. プロトコルは、排出量誘致のためにバリデーターにインセンティブを提供します。

### Sunriseの実装

Sunriseは、独自のアーキテクチャでPoLのコンセプトを基盤としています。

* **$vRISE**: ステーキングとガバナンスのための譲渡不可能なトークン
* **$RISE**: ガスと手数料として使用される譲渡可能なトークン

**技術的実装:**

* `x/liquiditypool`モジュールの流動性プロバイダーは$vRISEを獲得します。
* $vRISE保有者は`x/staking`モジュールでステークできます。
* ステーカーは`x/liquidityincentive`モジュールを通じてゲージ投票に参加します。
* ゲージ投票者は、どのプールが$vRISEインセンティブを受け取るかを決定します。
* 投票者はプールの利益から報酬を得て、インセンティブを調整します。

## 技術的アーキテクチャ

### Sunriseモジュール

Sunriseの実装は、PoLエコシステムを構築するために相互作用するいくつかの主要なモジュールで構成されています。

| | 機能 |
| -------------------- | --------------------------------------- |
| x/liquiditypool | コアAMM機能 |
| x/liquidityincentive | ゲージ投票とインセンティブ分配 |
| x/swap | トークンスワップ実装 |
| x/staking | vRISEステーキング管理 |

### ゲージ投票システム

ゲージ投票システムは、PoL実装の礎です。

1. **エポックベースの投票**:

* 投票力は、エポック開始時にステークされた$vRISEによって決定されます。
* 各エポックは、事前に定義された数のブロックにわたります（ガバナンスを介して設定可能）。
* 新しいエポックが作成されるたびに、投票はクリアされます。

2. **報酬分配**:

$$
\text{プール報酬} = \text{総報酬} \times \frac{\text{プールの投票力}}{\text{全プールの総投票力}}
$$

$$
\text{ユーザー報酬} = \text{プール報酬} \times \frac{\text{ユーザーの投票力}}{\text{プールの投票力}}
$$

* 排出量はブロックごとに計算されます。
* 投票されたゲージの重みと各ユーザーの投票力に基づいて分配されます。
* 報酬はユーザーのポジションに蓄積されます。いつでも請求できます。

### コンセンサス実装

Sunriseは、次の仕様でコンセンサスにCometBFT（Tendermint）を使用します。

* **最大バリデーターセット**: 100バリデーター
* **ブロックタイム**: 約10秒
* **バリデーター選択**: ステークの重みに基づく

将来の計画には、スループット向上のためのMysticeti統合の調査が含まれます。

## 技術的利点

### 資本効率

ステークされたトークンがアイドル状態である従来のPoSとは異なり、PoLは以下を可能にします。

* 流動性提供による積極的な資本活用
* 二重の収益機会（ステーキング+流動性手数料）
* ネットワークセキュリティのための機会費用が低い

### 経済的整合性

技術設計は、インセンティブを調整する循環的な依存関係を作成します。

* バリデーターは、報酬を最大化するためにデリゲートされた$RISE/$vRISEを必要とします。
* アプリケーションは、流動性のためにバリデーターの排出量を必要とします。
* ユーザーは、ガバナンストークンを獲得するために流動性を提供する必要があります。
* インフレ報酬は、$vRISE（ガバナンストークン）の希薄化につながらない$RISEで分配されます。

| 機能 | トークン | 詳細 |
| ------------------ | ---------------------------------------------------------------------------------------------- | ------------------------------------------------------ |
| セキュリティ | ![RISE](../../.gitbook/assets/RISE.png) RISE + ![vRISE](../../.gitbook/assets/vRISE.png) vRISE | vRISEとRISEの両方をコンセンサスのためにステークできます |
| ガバナンス | ![vRISE](../../.gitbook/assets/vRISE.png) vRISE | vRISEはオンチェーンガバナンスとゲージ投票に使用されます |
| セキュリティ排出量 | ![RISE](../../.gitbook/assets/RISE.png) RISE | RISEはコンセンサス報酬としてステーカーに分配されます |
| LP排出量 | ![vRISE](../../.gitbook/assets/vRISE.png) vRISE | vRISEはインセンティブとしてLPに分配されます |
| 手数料 | Any (swapped to [Fee Token](fee.md)) | RISEは取引手数料として使用されます |

**凡例:**\
![RISE](../../.gitbook/assets/RISE.png) = RISE\
![vRISE](../../.gitbook/assets/vRISE.png) = vRISE

> **注意:**\
> Sunriseでは、各トークンの役割と報酬が明確に定義されています。\
> この明確な機能分離は、ガバナンスや流動性報酬が分配される際のネットワークセキュリティの希薄化を防ぐのに役立ちます。

### セキュリティに関する考慮事項

実装には、いくつかのセキュリティ対策が含まれています。

* **スラッシング条件**: バリデーターは、不正行為に対してステークされた資産を失うリスクがあります。
* **ガバナンスの保護措置**: 加重投票は乗っ取りを防ぎます。
* **インセンティブの互換性**: 経済設計は攻撃を抑制します。

## パフォーマンスに関する考慮事項

PoLの実装は、いくつかのパフォーマンス要素のバランスを取る必要があります。

* **エポックの長さ**: エポックが長いと計算オーバーヘッドは減少しますが、応答性は低下します。
* **バリデーターセットのサイズ**: セットが大きいと分散化は向上しますが、コンセンサス速度に影響を与える可能性があります。
* **投票処理**: ガス代を最小限に抑えるために、エポックの境界で投票をバッチ処理します。
* **レシートトークンの計算**: 流動性ポジションと報酬分配の最適化された追跡。

## 今後の方向性

いくつかの技術的強化が検討されています。

1. **Mysticeti統合**: スループット向上のためのMysticetiコンセンサスの採用を調査
2. **クロスチェーンゲージ**: 接続されたチェーン上の流動性に対する投票を可能にする
3. **動的排出スケジュール**: ネットワークメトリクスに基づく排出量のアルゴリズム的調整
4. **高度な報酬メカニズム**: ボンディングカーブを使用した、より洗練された報酬分配

## 参考文献

* [Berachain: Flow of Value](https://blog.berachain.com/blog/flow-of-value-examining-the-differences-between-pos-and-pol-a-case-for-a-new-paradigm-in-sustainable-incentive-alignment-at-the-protocol-layer)
* [ve(3,3) Tokenomics](https://andrecronje.medium.com/ve-3-3-44466eaa088b)
* [Curve Finance ve-Token Model](https://curve.fi/files/CurveDAO.pdf)
* [Mysticeti Consensus](https://sui.io/mysticeti)
