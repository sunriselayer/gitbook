# Sovereign Rollupsにおける相互運用性

Sovereign Rollupsは、レイヤー2の設計における重要な進化を示します。クロスチェーンの検証を決済レイヤーのブリッジコントラクトに委任する代わりに、Sovereign Rollupsは対向チェーンの*独自のライトクライアント検証を実行*し、そのためアプリケーションレベルで*どのように*、そして*誰と*通信するかを決定します。
このアーキテクチャは、ロールアップの自律性を維持しつつ、外部レイヤーでの信頼性を最小限に抑えたデータ可用性（DA）と決済を可能にします。

---

## 従来のスマートコントラクトロールアップ

古典的なオプティミスティック/ZKロールアップでは、すべてのクロスチェーンアクションは、レイヤー1の決済チェーン上に存在する**単一のハードコードされた「固定」ブリッジ**を通過する必要があります。

**実行パス**

1.  **L1上のロールアップコントラクト** – ステートルートとブリッジロジックを保存します。
2.  **証明/オプティミスティックウィンドウ** – ロールアップは証明またはルートを投稿し、ブリッジコントラクトが不正/ZK証明を裁定します。
3.  **アウトバウンド転送** – ユーザーはブリッジ内に資産をロックし、引き出し証明はコントラクトによって検証されます。
4.  **アップグレードの摩擦** – ブリッジのセマンティクスに変更を加えるには、L1コントラクトのアップグレードが必要です（多くの場合、ガバナンスのハードフォークを介して）。

**制限事項**

*   **単一障害点** – ブリッジコントラクトはシステム全体のリスクとなります。
*   **異種ブリッジの不在** – アプリケーションはL1ガバナンスなしに新しいチャネルを追加できません。
*   **ラップされた資産** – ほとんどのブリッジは、ネイティブ転送の代わりにIOUトークンをミントします。
*   **スループットのボトルネック** – すべてのメッセージが同じコントラクトにキューイングされ、ガススパイクがロールアップユーザーに伝播します。

---

## Sovereign Rollups

Sovereign Rollupsは、そのデータ（ブロブ、ステートルート）をDAレイヤーに公開しますが、オンチェーンのライトクライアントまたは有効性証明を介して他のチェーンを*自己検証*します。
ブリッジは、許可なく展開およびアップグレードできる通常のモジュールになります。

### 技術的特性

| 機能 | 実装詳細 |
|---|---|
| **自己主権検証** | 各リモートチェーン用の埋め込みライトクライアントまたはZK検証機。外部ブリッジコントラクトへの依存なし。 |
| **複数プロトコル** | IBC、カスタムSNARKブリッジ、またはトークン固有のチャネルを並行してサポート。 |
| **ネイティブ資産の移動** | ライトクライアント検証により、ロールアップはラップされたIOUを回避し、*元の*トークンのロックを解除できます。 |
| **構成可能なチャネル** | 各アプリケーションは、カスタム料金ロジック、レート制限、またはミドルウェアを備えた独立したチャネルをインスタンス化できます。 |
| **分離されたアップグレード** | ブリッジロジックはロールアップモジュールです。アップグレードにはL1ガバナンスは必要なく、ロールアップのガバナンスまたはコードの更新のみが必要です。 |

---

## IBC — Sovereign相互運用性の事実上の標準

**Inter-Blockchain Communication (IBC)**プロトコル（Cosmos SDKに由来）は、以下を提供します：

*   **クライアント-接続-チャネルの抽象化** – 認証（ライトクライアント）とアプリケーションのセマンティクスを明確に分離する階層化されたハンドシェイク。
*   **コミットのみのライトクライアント** – 各チェーンは他のチェーンのヘッダーコミットメントを保存し、マークル証明をオンチェーンで検証します。
*   **許可不要のリレーヤー** – オフチェーンプロセスがパケットをブロードキャストし、どの参加者も信頼権限を得ることなくリレーできます。
*   **順序付き/順序なしチャネル** – ファンジブルトークン（ICS-20）と任意のデータ（ICS-27、ICS-721など）の両方に適した決定論的なパケットシーケンス。
*   **タイムアウトとアップグレードパス** – 不正行為があった場合、チャネルは閉じることができ、ライトクライアントは新しいクライアント状態のオンチェーン証明を使用して自律的にアップグレードします。

Sovereign Rollupsはすでに独自のステート遷移関数を所有しているため、IBCの統合には以下のみが必要です：

1.  IBC *コア*モジュール（クライアント、接続、チャネルロジック）のインポート。
2.  各対向チェーン用のライトクライアント実装の提供（例：Tendermint-BFT、zkベースのヘッダー証明、Ethereum-SSZ）。
3.  パケットをマーシャリングするアプリケーションモジュール（トークン転送、クロスロールアップDEXなど）の定義。

---

## 比較：従来型 vs Sovereign相互運用性

| 機能 | 従来型ロールアップ | Sovereign Rollups |
|---|---|---|
| ブリッジ権限 | L1決済レイヤー | 自己主権検証 |
| ブリッジのカスタマイズ | 限定的またはなし | 完全にカスタマイズ可能 |
| プロトコルサポート | 独自、単一ブリッジ | 複数（IBC、ZKブリッジ、カスタム） |
| 資産タイプ | 多くの場合トークンに限定 | トークン、NFT、任意のデータパケット |
| セキュリティモデル | L1ブリッジコントラクトを継承 | ライトクライアントまたは有効性証明の選択 |
| アップグレードパス | L1ガバナンスに依存 | 独立—ロールアップレベルのガバナンス |

---

## Sovereign Rollupのツールとエコシステム

| フレームワーク/コンポーネント | 相互運用性機能 |
|---|---|
| **Rollkit** | プラグアンドプレイのモジュラーロールアップフレームワーク。ネイティブIBC配線。Tendermint、Celestia、およびSunrise DAバックエンドをサポート。 |
| **Sovereign SDK** | ゼロ知識または不正証明のSovereignチェーン用のRustツールキット。汎用IBCライトクライアントトレイトとリレーヤーフックを同梱。 |
| **Sunrise DA** | Proof of Liquidity（PoL）によるデータ可用性を提供。Sunrise上に構築されたSovereign Rollupsが広範なIBCメッシュへの接続性を継承できるようにIBCインターフェースを公開。 |
| **アプリケーションパターン** | *クロスチェーンDeFi*（オムニ流動性プール）、*相互運用可能なゲーム*（資産のポータビリティ）、*マルチチェーンID*（DIDパケット）、*チェーン非依存DAO*（複数のロールアップにまたがるガバナンス）。 |
